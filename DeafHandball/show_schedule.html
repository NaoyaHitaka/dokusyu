<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>予定詳細</title>
</head>
<style>
    .button-container {
        display: flex;
        gap: 80px; /*ボタンの間隔を設定する*/
        justify-content: center;  /*ボタンを中央に設置*/
        background-color:#0000ff 
    }
    .button01 a {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0 auto;
        padding: 1em 2em;
        width: 130px;
        color: #ffffff;
        font-size: 13.5px;
        font-weight: 500;
        background-color: #0000ff;
        /*border: 3px solid #a0c4d3;*/
        border-radius: 10px;
    }
    .button01 a::after {
        content: '';
        width: 5px;
        height: 5px;
        border-top: 3px solid #2285b1;
        border-right: 3px solid #2285b1;
        transform: rotate(45deg);
    }
    .button01 a:hover {
        color: #333333;
        text-decoration: none;
        background-color: #a0c4d3;
    }
    .button01 a:hover::after{
        border-top: 3px solid #333333;
        border-right: 3px solid #333333;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        border: 2px solid #000;
    }
    th, td {
        width: 30pt;
        height: 40pt;
        padding: 5px;
        text-align: center;
        border: 1px solid #000;
        position: relative;
    }
    th {
        background-color: #f2f2f2;
    }
    .btn-container {
        margin-top: 20px;
        text-align: center;
    }
    .btn {
        padding: 10px 20px;
        margin: 0 10px;
        cursor: pointer;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
    }
</style>
<body>
    <h1>Deaf Handball Club</h1>
        <div class="button-container">
        <div class="button01">
            <a href="index.html">ホーム</a>
        </div>
        <div class="button01">
            <a href="news.html">ニュース</a>
        </div>
        <div class="button01">
            <a href="player.html">選手名鑑</a>
        </div>
        <div class="button01">
            <a href="result.html">試合結果</a>
        </div>
        <div class="button01">
            <a href="schedule.html">今後のスケジュール</a>
        </div>
        <div class="button01">
            <a href="social.html">ソーシャル</a>
        </div>
        </div>
    <h1 id="scheduleDate"></h1>
    <div id="scheduleDetails"></div>
    <div id="schedule-container"></div>

    <script>
        // URLから年月日を取得
        const urlParams = new URLSearchParams(window.location.search);
        const year = urlParams.get('year');
        const month = urlParams.get('month');
        const day = urlParams.get('day');


        // 日付を表示
        const scheduleDateElement = document.getElementById('scheduleDate');
        scheduleDateElement.textContent = `${year}年${month}月${day}日の予定`;

        let schedule = [
                { id: 1, 日付: '2024-4-6', 時間: '13:00~17:00', 種別: '練習', 場所: '筑波技術大学体育館' , 備考: '-'},
                { id: 2, 日付: '2024-4-13', 時間: '13:00~17:00', 種別: '練習', 場所: '筑波技術大学体育館' , 備考: '-'},
                { id: 3, 日付: '2024-4-14', 時間: '10:00~' , 種別: '練習', 場所: '味の素ナショナルトレーニングセンター', 備考: '-'},
                { id: 4, 日付: '2024-4-29', 時間: '16:00~' , 種別: '大会', 場所: '東京都あきる野市秋川体育館', 備考: '東京都4部リーグ'},
                { id: 5, 日付: '2024-5-1', 時間: '18:00~21:00', 種別: '練習', 場所: '臨海青海特別支援学校', 備考: '-'},
                { id: 6, 日付: '2024-5-3', 時間: '16:30~' , 種別: '大会', 場所: '神奈川・秋葉台文化体育館', 備考: '東京都4部リーグ'},
                { id: 7, 日付: '2024-5-4', 時間: '15:00~18:00', 種別: '練習', 場所: '臨海青海特別支援学校', 備考: '-'},
                { id: 8, 日付: '2024-5-8', 時間: '18:00~21:00', 種別: '練習', 場所: '水元小合学園', 備考: '-'},
                { id: 9, 日付: '2024-5-11', 時間: '10:00~16:00', 種別: 'イベント', 場所: '', 備考:'湘南しゅわ市場'},
                { id: 10, 日付: '2024-5-12', 時間: '15:00~18:00', 種別: '練習', 場所: '水元小合学園', 備考: '-'},
                { id: 11, 日付: '2024-5-15', 時間: '18:00~21:00', 種別: '練習', 場所: '水元小合学園', 備考: '-'},
                { id: 12, 日付: '2024-5-18', 時間: '15:00~18:00', 種別: '練習', 場所: '臨海青海特別支援学校', 備考: '-'},
                { id: 13, 日付: '2024-5-29', 時間: '18:00~21:00', 種別: '練習', 場所: '水元小合学園', 備考: '-'}
            ];
        
        console.log(schedule);

        const date = { year: year, month: month, day: day };
        const displayschedule = getScheduleDetailsForDate(date);
        //displaySchedule(displayschedule);

        // 指定された日付の詳細な予定データを取得する関数
        function getScheduleDetailsForDate(date) {
            const year = date.year;
            const month = date.month;
            const day = date.day;
            
            
            console.log(year);
            console.log(month);
            console.log(day);

            let scheduleData = {}; // scheduleDataを初期化

            // ここで必要な処理を実行し、scheduleDataを適切に設定する

            // 例えば、scheduleから特定の日付の予定データを抽出してscheduleDataに格納する処理を行う
            schedule.forEach(event => {
                const dateString = event.日付;
                console.log(dateString);
                //console.log(event.日付);
                const dateParts = dateString.split('-');
                const year = parseInt(dateParts[0], 10);
                const month = parseInt(dateParts[1], 10); // 月は0-indexedなので1を引きます
                const day = parseInt(dateParts[2], 10);
                const eventDate = new Date(year, month-1, day);
                console.log(eventDate); // ここでeventDateを確認してみてください
                
                if (
                    eventDate.getFullYear() == date.year &&
                    eventDate.getMonth() + 1 == date.month &&
                    eventDate.getDate() == date.day
                ) {
                    let dateKey = null; // dateKeyを初期化
                    dateKey = `${date.year}-${(date.month)}-${(date.day)}`;
                    console.log('dateKey:', dateKey, typeof dateKey);
                    if (!scheduleData[dateKey]) {
                        scheduleData[dateKey] = [];
                    }
                    scheduleData[dateKey].push(event);
                }
            });
            
            //console.log(scheduleData);
            displaySchedule(scheduleData);
        }
        // 予定を表示する関数
        function displaySchedule(scheduleData) {
            const scheduleContainer = document.getElementById('schedule-container');
            console.log('scheduleData:', scheduleData);
    
            if (!scheduleData || Object.keys(scheduleData).length === 0) {
                scheduleContainer.innerHTML = '<p>本日の予定はありません</p>';
                return;
            }
    
            let html = '<table style="border-collapse: collapse; width: 100%;">'; // テーブルのスタイルを追加
            html += '<tr style="border: 1px solid black; background-color: #f2f2f2;">'; // ヘッダー行のスタイルを追加
            html += '<th style="border: 1px solid black; padding: 8px;">時間</th>';
            html += '<th style="border: 1px solid black; padding: 8px;">種別</th>';
            html += '<th style="border: 1px solid black; padding: 8px;">場所</th>';
            html += '<th style="border: 1px solid black; padding: 8px;">備考</th>';
            html += '</tr>';

            // すべての予定を反復処理して HTML を構築する
            for (const dateKey in scheduleData) {
                const events = scheduleData[dateKey];
                events.forEach(event => {
                    html += '<tr style="border: 1px solid black;">'; // 各行のスタイルを追加
                    html += `<td style="border: 1px solid black; padding: 8px;">${event.時間}</td>`;
                    html += `<td style="border: 1px solid black; padding: 8px;">${event.種別}</td>`;
                    html += `<td style="border: 1px solid black; padding: 8px;">${event.場所}</td>`;
                    html += `<td style="border: 1px solid black; padding: 8px;">${event.備考}</td>`;
                    html += '</tr>';
                });
            }
    
            html += '</table>';
            scheduleContainer.innerHTML = html;
        }
        

    </script>
</body>
</html>